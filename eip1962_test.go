package eip1962

import (
	"bytes"
	"encoding/hex"
	"testing"
)

func TestPositiveVector(t *testing.T) {
	data, _ := hex.DecodeString("02504cd8ba431099fb251892b92d4fe65d22fb7c888d28ed3f70bb2cc9699e645f6bf3b452bdee66c8a94c6dd595c233e288c1689cf2e9507d8077f965f6caa5f2a230c72b71513028b69f5e2855f8e48d3d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013605ebda7cf0c836f1298dadf37ea6de60b7810fffb76f9a009e2b74919d92f289a799a98afa3e5c2e7b91976b5a13ed16f93b1e2f2de9347072f02d0a2075b80e10fc10aef80ac6cd9d617f713c68397a7b009e36f7ab5af01bece3975f1bb39a5a7f310072ba9ef56fb066c7b6adc5c8d5358e267904a6e42a25c34604a15c5dabe498dfd8c3264d46166da57a94639dfd6e67f53146cc8181553bec5792869ca85459d3267eb48372427fd1a9487e89af7e6d88bd5af5e248f280bb5ed08723db97178d391e5dbfbd1ed4205d235ab3e7a45c19ee28057bd29c4242168a1bb8fda5265dcf2f7add87ab666530e8b2f6e88ae3e377d4eb1a889370b4d900f08f3b0ecbc900aeb0b1c46d61dc")
	expected, _ := hex.DecodeString("20ba1a9ec71be463581d20b7688b223376e456be999e1789e9350d0d770b013737b0a2433cfd8b3e2dd54faa5a2def27f905db775231b1c10fe855273f4f0f3e49eae2a7e95241108cf24bfb8dfd78c225aa00c814bd1f7a81b0e35054b8aad5c018fddc3ad24c289238c699ebb2efa0c80666c8afeedc157bce8895e5efa5e9fda1627e98b94d6062fd7af7ec192500eeaac2f454c02c9a900fd969756f7dce")
	result, err := Call(data)
	if err != nil {
		t.Fail()
	}
	if bytes.Compare(result, expected) != 0 {
		t.Fail()
	}
}

func TestNegativeVector(t *testing.T) {
	data, _ := hex.DecodeString("02504cd8ba431099fb251892b92d4fe65d22fb7c888d28ed3f70bb2cc9699e645f6bf3b452bdee66c8a94c6dd595c233e288c1689cf2e9507d8077f965f6caa5f2a230c72b71513028b69f5e2855f8e48d3d000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000000013605ebda7cf0c836f1298dadf37ea6de60b7810fffb76f9a009e2b74919d92f289a799a98afa3e5c2e7b91976b5a13ed16f93b1e2f2de9347072f02d0a2075b80e10fc10aef80ac6cd9d617f713c68397a7b009e36f7ab5af01bece3975f1bb39a5a7f310072ba9ef56fb066c7b6adc5c8d5358e267904a6e42a25c34604a15c5dabe498dfd8c3264d46166da57a94639dfd6e67f53146cc8181553bec5792869ca85459d3267eb48372427fd1a9487e89af7e6d88bd5af5e248f280bb5ed08723db97178d391e5dbfbd1ed4205d235ab3e7a45c19ee28057bd29c4242168a1bb8fda5265dcf2f7add87ab666530e8b2f6e88ae3e377d4eb1a889370b4d900f08f3b0ecbc900aeb0b1c46d61dc")
	expected, _ := hex.DecodeString("10ba1a9ec71be463581d20b7688b223376e456be999e1789e9350d0d770b013737b0a2433cfd8b3e2dd54faa5a2def27f905db775231b1c10fe855273f4f0f3e49eae2a7e95241108cf24bfb8dfd78c225aa00c814bd1f7a81b0e35054b8aad5c018fddc3ad24c289238c699ebb2efa0c80666c8afeedc157bce8895e5efa5e9fda1627e98b94d6062fd7af7ec192500eeaac2f454c02c9a900fd969756f7dce")
	result, err := Call(data)
	if err != nil {
		t.Fail()
	}
	if bytes.Compare(result, expected) == 0 {
		t.Fail()
	}
}
